webpackJsonp([5],{0:function(e,t,n){n(429),e.exports=n(436)},208:function(e,t,n){"use strict";function a(e,t){var n=function(n){function a(){o(this,a),r(Object.getPrototypeOf(a.prototype),"constructor",this).apply(this,arguments)}return s(a,n),i(a,[{key:"render",value:function(){return m["default"].createElement(e,d({},this.props,_.bindActionCreators(t,this.props.dispatch)))}}]),a}(l.Component);return n}var r=n(4)["default"],s=n(18)["default"],i=n(29)["default"],o=n(32)["default"],d=n(209)["default"],u=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.wrapComponentWithActions=a;var _=n(197),l=n(33),m=u(l),c=n(215),h=u(c),f=n(216),M=u(f),p=M["default"](),L=_.applyMiddleware(h["default"],p)(_.createStore);t["default"]=L},209:function(e,t,n){"use strict";var a=n(210)["default"];t["default"]=a||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t.__esModule=!0},210:function(e,t,n){e.exports={"default":n(211),__esModule:!0}},211:function(e,t,n){n(212),e.exports=n(16).Object.assign},212:function(e,t,n){var a=n(14);a(a.S+a.F,"Object",{assign:n(213)})},213:function(e,t,n){var a=n(7),r=n(214),s=n(10);e.exports=n(17)(function(){var e=Object.assign,t={},n={},a=Symbol(),r="abcdefghijklmnopqrst";return t[a]=7,r.split("").forEach(function(e){n[e]=e}),7!=e({},t)[a]||Object.keys(e({},n)).join("")!=r})?function(e,t){for(var n=r(e),i=arguments,o=i.length,d=1,u=a.getKeys,_=a.getSymbols,l=a.isEnum;o>d;)for(var m,c=s(i[d++]),h=_?u(c).concat(_(c)):u(c),f=h.length,M=0;f>M;)l.call(c,m=h[M++])&&(n[m]=c[m]);return n}:Object.assign},214:function(e,t,n){var a=n(12);e.exports=function(e){return Object(a(e))}},215:function(e,t){"use strict";function n(e){var t=e.dispatch,n=e.getState;return function(e){return function(a){return"function"==typeof a?a(t,n):e(a)}}}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},216:function(e,t){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(t){var n=t.getState;return function(t){return function(a){var i=e.level,o=e.logger,d=e.collapsed,u=e.predicate,_=e.duration,l=void 0===_?!1:_,m=e.timestamp,c=void 0===m?!0:m,h=e.transformer,f=void 0===h?function(e){return e}:h,M=e.actionTransformer,p=void 0===M?function(e){return e}:M,L=o||window.console;if("undefined"==typeof L)return t(a);if("function"==typeof u&&!u(n,a))return t(a);var y=s.now(),Y=f(n()),v=t(a),D=s.now()-y,g=f(n()),k=new Date,T="function"==typeof d?d(n,a):d,w=c?" @ "+r(k.getHours(),2)+":"+r(k.getMinutes(),2)+":"+r(k.getSeconds(),2)+"."+r(k.getMilliseconds(),3):"",b=l?" in "+D.toFixed(2)+" ms":"",S=p(a),H="action "+S.type+w+b,j=T?L.groupCollapsed:L.group;try{j.call(L,H)}catch(E){L.log(H)}i?(L[i]("%c prev state","color: #9E9E9E; font-weight: bold",Y),L[i]("%c action","color: #03A9F4; font-weight: bold",S),L[i]("%c next state","color: #4CAF50; font-weight: bold",g)):(L.log("%c prev state","color: #9E9E9E; font-weight: bold",Y),L.log("%c action","color: #03A9F4; font-weight: bold",S),L.log("%c next state","color: #4CAF50; font-weight: bold",g));try{L.groupEnd()}catch(E){L.log("—— log end ——")}return v}}}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){return new Array(t+1).join(e)},r=function(e,t){return a("0",t-e.toString().length)+e},s="undefined"!=typeof performance&&"function"==typeof performance.now?performance:Date;t["default"]=n,e.exports=t["default"]},217:function(e,t,n){"use strict";var a=n(4)["default"],r=n(18)["default"],s=n(29)["default"],i=n(32)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(33),u=o(d),_=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),s(t,[{key:"renderBackButton",value:function(){var e=this.props,t=e.canBack,n=e.onGoBack;return t===!0?u["default"].createElement("a",{href:"javascript:;",onClick:n,className:"iconfont icon-back"}):null}},{key:"render",value:function(){return u["default"].createElement("header",{className:"header"},this.renderBackButton(),this.props.children)}}]),t}(d.Component);_.defaultProps={canBack:!0,onGoBack:function(e){e.preventDefault(),window.history.back()}},t["default"]=_,e.exports=t["default"]},362:function(e,t,n){"use strict";function a(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}}}var r=n(34),s=n(71),i=n(363),o=n(365),d=r.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:o.propTypes.name,transitionAppear:r.PropTypes.bool,transitionEnter:r.PropTypes.bool,transitionLeave:r.PropTypes.bool,transitionAppearTimeout:a("Appear"),transitionEnterTimeout:a("Enter"),transitionLeaveTimeout:a("Leave")},getDefaultProps:function(){return{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return r.createElement(o,{name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},e)},render:function(){return r.createElement(i,s({},this.props,{childFactory:this._wrapChild}))}});e.exports=d},363:function(e,t,n){"use strict";var a=n(34),r=n(364),s=n(71),i=n(47),o=a.createClass({displayName:"ReactTransitionGroup",propTypes:{component:a.PropTypes.any,childFactory:a.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:i.thatReturnsArgument}},getInitialState:function(){return{children:r.getChildMapping(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},componentWillReceiveProps:function(e){var t=r.getChildMapping(e.children),n=this.state.children;this.setState({children:r.mergeChildMappings(n,t)});var a;for(a in t){var s=n&&n.hasOwnProperty(a);!t[a]||s||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(a in n){var i=t&&t.hasOwnProperty(a);!n[a]||i||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performAppear:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},_handleDoneAppearing:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var n=r.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=r.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=r.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)?this.performEnter(e):this.setState(function(t){var n=s({},t.children);return delete n[e],{children:n}})},render:function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(a.cloneElement(this.props.childFactory(n),{ref:t,key:t}))}return a.createElement(this.props.component,this.props,e)}});e.exports=o},364:function(e,t,n){"use strict";var a=n(148),r={getChildMapping:function(e){return e?a(e):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},r=[];for(var s in e)t.hasOwnProperty(s)?r.length&&(a[s]=r,r=[]):r.push(s);var i,o={};for(var d in t){if(a.hasOwnProperty(d))for(i=0;i<a[d].length;i++){var u=a[d][i];o[a[d][i]]=n(u)}o[d]=n(d)}for(i=0;i<r.length;i++)o[r[i]]=n(r[i]);return o}};e.exports=r},365:function(e,t,n){"use strict";var a=n(34),r=n(35),s=n(366),i=n(367),o=n(188),d=17,u=a.createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.shape({enter:a.PropTypes.string,leave:a.PropTypes.string,active:a.PropTypes.string}),a.PropTypes.shape({enter:a.PropTypes.string,enterActive:a.PropTypes.string,leave:a.PropTypes.string,leaveActive:a.PropTypes.string,appear:a.PropTypes.string,appearActive:a.PropTypes.string})]).isRequired,appear:a.PropTypes.bool,enter:a.PropTypes.bool,leave:a.PropTypes.bool,appearTimeout:a.PropTypes.number,enterTimeout:a.PropTypes.number,leaveTimeout:a.PropTypes.number},transition:function(e,t,n){var a=r.findDOMNode(this);if(!a)return void(t&&t());var o=this.props.name[e]||this.props.name+"-"+e,d=this.props.name[e+"Active"]||o+"-active",u=null,_=function(e){e&&e.target!==a||(clearTimeout(u),s.removeClass(a,o),s.removeClass(a,d),i.removeEndEventListener(a,_),t&&t())};s.addClass(a,o),this.queueClass(d),n?u=setTimeout(_,n):i.addEndEventListener(a,_)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,d))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(s.addClass.bind(s,r.findDOMNode(this))),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillAppear:function(e){this.props.appear?this.transition("appear",e,this.props.appearTimeout):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},render:function(){return o(this.props.children)}});e.exports=u},366:function(e,t,n){(function(t){"use strict";var a=n(45),r={addClass:function(e,n){return/\s/.test(n)?"production"!==t.env.NODE_ENV?a(!1,'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',n):a(!1):void 0,n&&(e.classList?e.classList.add(n):r.hasClass(e,n)||(e.className=e.className+" "+n)),e},removeClass:function(e,n){return/\s/.test(n)?"production"!==t.env.NODE_ENV?a(!1,'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',n):a(!1):void 0,n&&(e.classList?e.classList.remove(n):r.hasClass(e,n)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?r.addClass:r.removeClass)(e,t)},hasClass:function(e,n){return/\s/.test(n)?"production"!==t.env.NODE_ENV?a(!1,"CSS.hasClass takes only a single class name."):a(!1):void 0,e.classList?!!n&&e.classList.contains(n):(" "+e.className+" ").indexOf(" "+n+" ")>-1}};e.exports=r}).call(t,n(36))},367:function(e,t,n){"use strict";function a(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete o.animationend.animation,"TransitionEvent"in window||delete o.transitionend.transition;for(var n in o){var a=o[n];for(var r in a)if(r in t){d.push(a[r]);break}}}function r(e,t,n){e.addEventListener(t,n,!1)}function s(e,t,n){e.removeEventListener(t,n,!1)}var i=n(41),o={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},d=[];i.canUseDOM&&a();var u={addEndEventListener:function(e,t){return 0===d.length?void window.setTimeout(t,0):void d.forEach(function(n){r(e,n,t)})},removeEndEventListener:function(e,t){0!==d.length&&d.forEach(function(n){s(e,n,t)})}};e.exports=u},429:function(e,t,n){"use strict";function a(){var e=JSON.parse(document.getElementById("initial-state").textContent);_["default"].render(d["default"].createElement(i["default"],{initialState:e}),document.getElementById("coupon-detail"))}var r=n(2)["default"],s=n(430),i=r(s),o=n(33),d=r(o),u=n(218),_=r(u);window.addEventListener("DOMContentLoaded",a)},430:function(e,t,n){"use strict";function a(e){var t=e.couponById,n=t.coupon,a=t.isFetching;return{coupon:n,isFetching:a}}function r(e){return M["default"](h["default"],e)}var s=n(4)["default"],i=n(18)["default"],o=n(29)["default"],d=n(32)["default"],u=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var _=n(33),l=u(_),m=n(190),c=n(431),h=u(c),f=(n(197),n(208)),M=u(f),p=n(432),L=u(p),y=m.connect(a)(L["default"]),Y=function(e){function t(e){d(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props.initialState.coupon,t={couponById:{isFetching:!1,coupon:e}},n=r(t);return l["default"].createElement(m.Provider,{store:n},l["default"].createElement(y,null))}}]),t}(l["default"].Component);t["default"]=Y,e.exports=t["default"]},431:function(e,t,n){"use strict";function a(e,t){switch(void 0===e&&(e={}),t.type){default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(197),s=r.combineReducers({couponById:a});t["default"]=s,e.exports=t["default"]},432:function(e,t,n){"use strict";var a=n(4)["default"],r=n(18)["default"],s=n(29)["default"],i=n(32)["default"],o=n(209)["default"],d=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var u=n(33),_=d(u),l=n(433),m=d(l),c=n(434),h=d(c),f=n(435),M=n(362),p=d(M),L=function(e){function t(e){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currentRoute:"index"}}return r(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;f.Router({"/rules":function(){e.setState({currentRoute:"rules"})},"/":function(){e.setState({currentRoute:"index"})}}).init("/")}},{key:"render",value:function(){var e=this.state.currentRoute,t=null;"index"===e?t=_["default"].createElement(m["default"],o({},this.props,{key:e})):"rules"===e&&(t=_["default"].createElement(h["default"],o({},this.props,{key:e})));var n="index"!==e?"moveRight":"moveLeft";return _["default"].createElement(p["default"],{component:"div",transitionName:n},t)}}]),t}(u.Component);t["default"]=L,e.exports=t["default"]},433:function(e,t,n){"use strict";var a=n(4)["default"],r=n(18)["default"],s=n(29)["default"],i=n(32)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(33),u=o(d),_=n(217),l=o(_),m=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),s(t,[{key:"renderButton",value:function(e){var t=null===e.costUrl?null:u["default"].createElement("span",null,u["default"].createElement("a",{href:e.costUrl},"立即使用")),n=null;return 1==e.isWeixin&&0==e.weixinBound?u["default"].createElement("span",null,u["default"].createElement("a",{href:e.bindWeixinUrl},"添加到微信卡包")):1==e.isWeixin&&1==e.weixinBound?u["default"].createElement("span",null,u["default"].createElement("a",{href:"javascript:void(null)",className:"disabled"},"已添加到微信卡包")):u["default"].createElement("div",{className:"coupon-detail-button"},t,n)}},{key:"render",value:function(){var e=this.props.coupon,t=null;return e.qrcodeVisible===!0&&(t=u["default"].createElement("div",{className:"coupon-qrcode"},u["default"].createElement("img",{src:e.qrCode,alt:""}))),u["default"].createElement("div",{className:"coupon-detail-content"},u["default"].createElement(l["default"],{title:"优惠券详情"},u["default"].createElement("span",null,u["default"].createElement("a",{href:"#/rules"},"用券规则"))),u["default"].createElement("div",{className:"coupon-detail-body"},t,this.renderButton(e),u["default"].createElement("p",null,u["default"].createElement("label",null,"优惠券号"),u["default"].createElement("span",null,e.couponNo)),u["default"].createElement("p",null,u["default"].createElement("label",null,"优惠券名"),u["default"].createElement("span",null,e.couponDefName)),u["default"].createElement("p",null,u["default"].createElement("label",null,"使用平台"),u["default"].createElement("span",null,""===e.customizeEmploy?e.employName:e.customizeEmploy)),u["default"].createElement("p",null,u["default"].createElement("label",null,"发券日期"),u["default"].createElement("span",null,e.issueDate)),u["default"].createElement("p",null,u["default"].createElement("label",null,"生效日期"),u["default"].createElement("span",null,e.useDate)),u["default"].createElement("p",null,u["default"].createElement("label",null,"使用期限"),u["default"].createElement("span",null,e.validityDate)),u["default"].createElement("p",null,u["default"].createElement("label",null,"使用说明"),u["default"].createElement("span",null,e.couponRemark))))}}]),t}(d.Component);t["default"]=m,e.exports=t["default"]},434:function(e,t,n){"use strict";var a=n(4)["default"],r=n(18)["default"],s=n(29)["default"],i=n(32)["default"],o=n(2)["default"];Object.defineProperty(t,"__esModule",{value:!0});var d=n(33),u=o(d),_=n(217),l=o(_),m=function(e){function t(){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),s(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"coupon-rules-content"},u["default"].createElement(l["default"],{title:"用券规则"}),u["default"].createElement("div",{className:"rule"},u["default"].createElement("p",null,"1.友阿发放的友阿平台优惠券仅支持在相应的平台提交订单时抵减商品金额（不可抵减运费），不能进行兑现和其他操作。异业联盟优惠券仅支持在友阿合作的商家门店按照相应规则使用；"),u["default"].createElement("p",null,"2.在友阿线上平台购物时使用的优惠券，如果订单没有拆分，则取消订单后，系统将自动返还对应的优惠券。如果订单被拆分，取消某一子订单，优惠券将不会返还；异业联盟优惠券使用之后将不予返还"),u["default"].createElement("p",null,"3.使用了友阿优惠券购物的订单发生退货行为时，不退还优惠券；"),u["default"].createElement("p",null,"4.同一笔订单参加相应的活动之后，如果仍然满足优惠券时候条件的，可继续使用优惠券；同一笔订单只可同时使用一张优惠券；"),u["default"].createElement("p",null,"5.优惠券过期作废，不支持延期；"),u["default"].createElement("p",null,"6.友阿云商发放的所有优惠券严禁出售或转让，如经发现并证实的，该券将予以作废处理；")))}}]),t}(d.Component);t["default"]=m,e.exports=t["default"]},435:function(e,t,n){!function(e){function t(){return""===u.hash||"#"===u.hash}function n(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n],n,e)===!1)return}function a(e){for(var t=[],n=0,a=e.length;a>n;n++)t=t.concat(e[n]);return t}function r(e,t,n){if(!e.length)return n();var a=0;!function r(){t(e[a],function(t){t||t===!1?(n(t),n=function(){}):(a+=1,a===e.length?n():r())})}()}function i(e,t,n){n=e;for(var a in t)if(t.hasOwnProperty(a)&&(n=t[a](e),n!==e))break;return n===e?"([._a-zA-Z0-9-%()]+)":n}function o(e,t){for(var n,a=0,r="";n=e.substr(a).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)a=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),r+=e.substr(0,n.index)+n[0];e=r+=e.substr(a);var s,o,d=e.match(/:([^\/]+)/gi);if(d){o=d.length;for(var u=0;o>u;u++)s=d[u],e="::"===s.slice(0,2)?s.slice(1):e.replace(s,i(s,t))}return e}function d(e,t,n,a){var r,s=0,i=0,o=0,n=(n||"(").toString(),a=(a||")").toString();for(r=0;r<e.length;r++){var d=e[r];if(d.indexOf(n,s)>d.indexOf(a,s)||~d.indexOf(n,s)&&!~d.indexOf(a,s)||!~d.indexOf(n,s)&&~d.indexOf(a,s)){if(i=d.indexOf(n,s),o=d.indexOf(a,s),~i&&!~o||!~i&&~o){var u=e.slice(0,(r||1)+1).join(t);e=[u].concat(e.slice((r||1)+1))}s=(o>i?o:i)+1,r=0}else s=0}return e}var u=document.location,_={mode:"modern",hash:u.hash,history:!1,check:function(){var e=u.hash;e!=this.hash&&(this.hash=e,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(e,t){function n(e){for(var t=0,n=l.listeners.length;n>t;t++)l.listeners[t](e)}var a=this;if(this.history=t,l.listeners||(l.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var r=document.createElement("iframe");r.id="state-frame",r.style.display="none",document.body.appendChild(r),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&a.check()}),window.setInterval(function(){a.check()},50),this.onHashChanged=n,this.mode="legacy"}return l.listeners.push(e),this.mode},destroy:function(e){if(l&&l.listeners)for(var t=l.listeners,n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},setHash:function(e){return"legacy"===this.mode&&this.writeFrame(e),this.history===!0?(window.history.pushState({},document.title,e),this.fire()):u.hash="/"===e[0]?e:"/"+e,this},writeFrame:function(e){var t=document.getElementById("state-frame"),n=t.contentDocument||t.contentWindow.document;n.open(),n.write("<script>_hash = '"+e+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var e=this._hash;return e!=u.hash&&(u.hash=e),this},onHashChanged:function(){}},l=e.Router=function(e){return this instanceof l?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),void this.mount(e||{})):new l(e)};l.prototype.init=function(e){var n,a=this;return this.handler=function(e){var t=e&&e.newURL||window.location.hash,n=a.history===!0?a.getPath():t.replace(/.*#/,"");a.dispatch("on","/"===n.charAt(0)?n:"/"+n)},_.init(this.handler,this.history),this.history===!1?t()&&e?u.hash=e:t()||a.dispatch("on","/"+u.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(n=t()&&e?e:t()?null:u.hash.replace(/^#/,""),n&&window.history.replaceState({},document.title,n)):n=this.getPath(),(n||this.run_in_init===!0)&&this.handler()),this},l.prototype.explode=function(){var e=this.history===!0?this.getPath():u.hash;return"/"===e.charAt(1)&&(e=e.slice(1)),e.slice(1,e.length).split("/")},l.prototype.setRoute=function(e,t,n){var a=this.explode();return"number"==typeof e&&"string"==typeof t?a[e]=t:"string"==typeof n?a.splice(e,t,s):a=[e],_.setHash(a.join("/")),a},l.prototype.insertEx=function(e,t,n,a){return"once"===e&&(e="on",n=function(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}(n)),this._insert(e,t,n,a)},l.prototype.getRoute=function(e){var t=e;if("number"==typeof e)t=this.explode()[e];else if("string"==typeof e){var n=this.explode();t=n.indexOf(e)}else t=this.explode();return t},l.prototype.destroy=function(){return _.destroy(this.handler),this},l.prototype.getPath=function(){var e=window.location.pathname;return"/"!==e.substr(0,1)&&(e="/"+e),e};var m=/\?.*/;l.prototype.configure=function(e){e=e||{};for(var t=0;t<this.methods.length;t++)this._methods[this.methods[t]]=!0;return this.recurse=e.recurse||this.recurse||!1,this.async=e.async||!1,this.delimiter=e.delimiter||"/",this.strict="undefined"==typeof e.strict?!0:e.strict,this.notfound=e.notfound,this.resource=e.resource,this.history=e.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&e.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&e.convert_hash_in_init!==!1,this.every={after:e.after||null,before:e.before||null,on:e.on||null},this},l.prototype.param=function(e,t){":"!==e[0]&&(e=":"+e);var n=new RegExp(e,"g");return this.params[e]=function(e){return e.replace(n,t.source||t)},this},l.prototype.on=l.prototype.route=function(e,t,n){var a=this;return n||"function"!=typeof t||(n=t,t=e,e="on"),Array.isArray(t)?t.forEach(function(t){a.on(e,t,n)}):(t.source&&(t=t.source.replace(/\\\//gi,"/")),Array.isArray(e)?e.forEach(function(e){a.on(e.toLowerCase(),t,n)}):(t=t.split(new RegExp(this.delimiter)),t=d(t,this.delimiter),void this.insert(e,this.scope.concat(t),n)))},l.prototype.path=function(e,t){var n=this.scope.length;e.source&&(e=e.source.replace(/\\\//gi,"/")),e=e.split(new RegExp(this.delimiter)),e=d(e,this.delimiter),this.scope=this.scope.concat(e),t.call(this,this),this.scope.splice(n,e.length)},l.prototype.dispatch=function(e,t,n){function a(){s.last=i.after,s.invoke(s.runlist(i),s,n)}var r,s=this,i=this.traverse(e,t.replace(m,""),this.routes,""),o=this._invoked;return this._invoked=!0,i&&0!==i.length?("forward"===this.recurse&&(i=i.reverse()),r=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],r&&r.length>0&&o?(this.async?this.invoke(r,this,a):(this.invoke(r,this),a()),!0):(a(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:e,path:t},n),!1)},l.prototype.invoke=function(e,t,a){var s,i=this;this.async?(s=function(n,a){return Array.isArray(n)?r(n,s,a):void("function"==typeof n&&n.apply(t,(e.captures||[]).concat(a)))},r(e,s,function(){a&&a.apply(t,arguments)})):(s=function(a){return Array.isArray(a)?n(a,s):"function"==typeof a?a.apply(t,e.captures||[]):void("string"==typeof a&&i.resource&&i.resource[a].apply(t,e.captures||[]))},n(e,s))},l.prototype.traverse=function(e,t,n,a,r){function s(e){function t(e){for(var n=[],a=0;a<e.length;a++)n[a]=Array.isArray(e[a])?t(e[a]):e[a];return n}function n(e){for(var t=e.length-1;t>=0;t--)Array.isArray(e[t])?(n(e[t]),0===e[t].length&&e.splice(t,1)):r(e[t])||e.splice(t,1)}if(!r)return e;var a=t(e);return a.matched=e.matched,a.captures=e.captures,a.after=e.after.filter(r),n(a),a}var i,o,d,u,_=[];if(t===this.delimiter&&n[e])return u=[[n.before,n[e]].filter(Boolean)],u.after=[n.after].filter(Boolean),u.matched=!0,u.captures=[],s(u);for(var l in n)if(n.hasOwnProperty(l)&&(!this._methods[l]||this._methods[l]&&"object"==typeof n[l]&&!Array.isArray(n[l]))){if(i=o=a+this.delimiter+l,this.strict||(o+="["+this.delimiter+"]?"),d=t.match(new RegExp("^"+o)),!d)continue;if(d[0]&&d[0]==t&&n[l][e])return u=[[n[l].before,n[l][e]].filter(Boolean)],u.after=[n[l].after].filter(Boolean),u.matched=!0,u.captures=d.slice(1),this.recurse&&n===this.routes&&(u.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean))),s(u);if(u=this.traverse(e,t,n[l],i),u.matched)return u.length>0&&(_=_.concat(u)),this.recurse&&(_.push([n[l].before,n[l].on].filter(Boolean)),u.after=u.after.concat([n[l].after].filter(Boolean)),n===this.routes&&(_.push([n.before,n.on].filter(Boolean)),u.after=u.after.concat([n.after].filter(Boolean)))),_.matched=!0,_.captures=u.captures,_.after=u.after,s(_)}return!1},l.prototype.insert=function(e,t,n,a){var r,s,i,d,u;if(t=t.filter(function(e){return e&&e.length>0}),a=a||this.routes,u=t.shift(),/\:|\*/.test(u)&&!/\\d|\\w/.test(u)&&(u=o(u,this.params)),t.length>0)return a[u]=a[u]||{},this.insert(e,t,n,a[u]);if(u||t.length||a!==this.routes){if(s=typeof a[u],i=Array.isArray(a[u]),a[u]&&!i&&"object"==s)switch(r=typeof a[u][e]){case"function":return void(a[u][e]=[a[u][e],n]);case"object":return void a[u][e].push(n);case"undefined":return void(a[u][e]=n)}else if("undefined"==s)return d={},d[e]=n,void(a[u]=d);throw new Error("Invalid route context: "+s)}switch(r=typeof a[e]){case"function":return void(a[e]=[a[e],n]);case"object":return void a[e].push(n);case"undefined":return void(a[e]=n)}},l.prototype.extend=function(e){function t(e){a._methods[e]=!0,a[e]=function(){var t=1===arguments.length?[e,""]:[e];a.on.apply(a,t.concat(Array.prototype.slice.call(arguments)))}}var n,a=this,r=e.length;for(n=0;r>n;n++)t(e[n])},l.prototype.runlist=function(e){var t=this.every&&this.every.before?[this.every.before].concat(a(e)):a(e);return this.every&&this.every.on&&t.push(this.every.on),t.captures=e.captures,t.source=e.source,t},l.prototype.mount=function(e,t){function n(t,n){var r=t,s=t.split(a.delimiter),i=typeof e[t],o=""===s[0]||!a._methods[s[0]],u=o?"on":r;return o&&(r=r.slice((r.match(new RegExp("^"+a.delimiter))||[""])[0].length),s.shift()),o&&"object"===i&&!Array.isArray(e[t])?(n=n.concat(s),void a.mount(e[t],n)):(o&&(n=n.concat(r.split(a.delimiter)),n=d(n,a.delimiter)),void a.insert(u,n,e[t]))}if(e&&"object"==typeof e&&!Array.isArray(e)){var a=this;t=t||[],Array.isArray(t)||(t=t.split(a.delimiter));for(var r in e)e.hasOwnProperty(r)&&n(r,t.slice(0))}}}(t)},436:function(e,t){}});